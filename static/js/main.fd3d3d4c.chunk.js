(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(39)},29:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),c=n.n(o),l=(n(29),n(5)),i=n(7),s=n(6),u=n(8),m=n(10),p=n(9),h=n(11),g=n.n(h),f=n(13),b=n(14),d=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!!localStorage.getItem("token")},n.onSubmit=function(){var e=Object(f.a)(g.a.mark(function e(t){var a,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.target.elements.username.value,password:t.target.elements.password.value})});case 3:return a=e.sent,e.next=6,a.text();case 6:r=e.sent,localStorage.setItem("token",r),n.setState({loggedIn:!0});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(u.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(p.a,{to:"/clients"}):r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",null,"Username",r.a.createElement("input",{type:"text",name:"username"})),r.a.createElement("label",null,"Password",r.a.createElement("input",{type:"password",name:"password"})),r.a.createElement("input",{type:"Submit"}))}}]),t}(a.Component),v=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={clients:[]},n.componentDidMount=Object(f.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/clients",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n.setState({clients:a}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),localStorage.removeItem("token"),n.setState({clients:[]}),console.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,10]])})),n.render=function(){return r.a.createElement("ul",null,n.state.clients.map(function(e){return r.a.createElement("li",{key:e.id},e.name)}))},n}return Object(u.a)(t,e),t}(a.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(p.b,Object.assign({},this.props,{component:function(){if(!localStorage.getItem("token"))return r.a.createElement(p.a,{to:"/login"});var t=e.props.component;return r.a.createElement(t,e.props)}}))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={loggedIn:!!localStorage.getItem("token")},n.onClick=function(e){e.preventDefault(),localStorage.removeItem("token"),n.setState({loggedIn:!1})},n.render=function(){return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{to:"/login"},"login")),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/clients"},"Clients")),r.a.createElement("li",null,r.a.createElement("a",{href:"#logout",onClick:n.onClick},"Logout")))),r.a.createElement(p.b,{path:"/",exact:!0,component:d}),r.a.createElement(p.b,{path:"/login",component:d}),r.a.createElement(E,{path:"/clients",component:v})))},n}return Object(u.a)(t,e),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.fd3d3d4c.chunk.js.map